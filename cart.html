<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart - Bhargavi Dairy & Veggie Farm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Arial", sans-serif;
      }
      /* .logo-img {
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #f0c14b;
        background: white;
        /* Remove fixed height/width if present */
        /* height: auto;
        width: auto;
        max-width: 60px;
        max-height: 60px;
      } */ 
      .logo-img {
              border-radius: 50%;
              object-fit: cover;
              border: 2px solid #f0c14b;
              background: white;
              width: 40px;
              height: 40px;
              transition: width 0.2s, height 0.2s;
            }
            @media (min-width: 480px) {
              .logo-img { width: 48px; height: 48px; }
            }
            @media (min-width: 768px) {
              .logo-img { width: 64px; height: 64px; }
            }
            @media (min-width: 1024px) {
              .logo-img { width: 80px; height: 80px; }
            }
            /* Slide-down animation for mobile menu */
      #mobile-menu {
        transition-property: transform, opacity;
        transition-duration: 300ms;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }
      #mobile-menu.open {
        transform: translateY(0);
        opacity: 1;
        pointer-events: auto;
      }
      #mobile-menu:not(.open) {
        transform: -translate-y-full;
        opacity: 0;
        pointer-events: none;
      }
      .slide-item {
        opacity: 0;
        transform: translateY(-20px);
        transition: opacity 300ms, transform 300ms;
      }
      #mobile-menu.open .slide-item {
        opacity: 1;
        transform: translateY(0);
      }
      #mobile-menu.open .slide-item:nth-child(1) { transition-delay: 0ms; }
      #mobile-menu.open .slide-item:nth-child(2) { transition-delay: 80ms; }
      #mobile-menu.open .slide-item:nth-child(3) { transition-delay: 160ms; }
      
    </style>
  </head>
  <body class="bg-gray-100">
    <!-- Navigation Bar (same as main page for consistency) -->
     <nav class="bg-gray-900 text-white p-3">
      <div
        class="container mx-auto flex items-center justify-between flex-wrap"
      >
        <!-- Logo -->
        <div class="flex items-center space-x-2 flex-shrink-0">
          <img src="logo.png" alt="Logo" class="logo-img" />
          <span class="text-xl sm:text-2xl font-bold">
            <a href="/index.html">Bhargavi Farm</a>
          </span>
        </div>
        <!-- Search Bar -->
        <div class="flex-1 mx-2 min-w-0">
          <div class="flex">
            <input
              type="text"
              id="search-input"
              data-i18n-placeholder="search_placeholder"
              placeholder="Search for dairy or vegetables..."
              class="w-full p-2 rounded-l-md border border-gray-300 focus:outline-none text-black"
            />
            <button
              class="bg-yellow-400 text-black p-2 rounded-r-md hover:bg-yellow-500"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                />
              </svg>
            </button>
          </div>
        </div>
        <!-- Language Selector -->
        <div class="ml-2">
          <select
            id="language-select"
            class="bg-gray-700 text-white p-2 rounded-md text-sm"
          >
            <option value="en">English</option>
            <option value="te">Telugu</option>
            <option value="hi">Hindi</option>
          </select>
        </div>
        <!-- Hamburger (Mobile Only) -->
        <button id="nav-toggle" class="block md:hidden ml-2 focus:outline-none">
          <svg
            class="w-7 h-7"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
        <!-- Menu Items (Desktop) -->
        <div id="nav-menu" class="hidden md:flex items-center space-x-4 ml-4">
          <a
            href="#"
            id="account-link"
            class="hover:text-yellow-400 transition-colors"
            data-i18n="account"
            >Account</a
          >
          <a
            href="#"
            id="help-desk-link"
            class="hover:text-yellow-400 transition-colors"
            data-i18n="help_desk"
            >Help Desk</a
          >
          <a
            href="/cart.html"
            class="hover:underline flex items-center relative"
          >
            <svg
              class="w-6 h-6 mr-1"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
              ></path>
            </svg>
            <span data-i18n="cart">Cart</span>
            <span id="cart-count" class="cart-count">0</span>
          </a>
        </div>
      </div>
      <!-- Mobile Slide Menu -->
      <div
        id="mobile-menu"
        class="md:hidden fixed left-0 right-0 top-[64px] z-50 bg-gray-800 px-4 py-4 rounded-b-lg shadow-lg max-w-full w-full mx-auto transition-all duration-300 ease-in-out transform -translate-y-full opacity-0 pointer-events-none"
      >
        <div class="flex flex-col items-center space-y-3">
          <a
            href="#"
            id="account-link-mobile"
            class="block py-2 px-4 rounded hover:bg-gray-700 w-full text-center transition slide-item"
            data-i18n="account"
            style="transition-delay: 0ms"
            >Account</a
          >
          <a
            href="#"
            id="help-desk-link-mobile"
            class="block py-2 px-4 rounded hover:bg-gray-700 w-full text-center transition slide-item"
            data-i18n="help_desk"
            style="transition-delay: 80ms"
            >Help Desk</a
          >
          <a
            href="/cart.html"
            class="block py-2 px-4 rounded hover:bg-gray-700 w-full text-center flex items-center justify-center relative transition slide-item"
            style="transition-delay: 160ms"
          >
            <svg
              class="w-6 h-6 mr-1"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
              ></path>
            </svg>
            <span data-i18n="cart">Cart</span>
            <span id="cart-count-mobile" class="cart-count ml-2">0</span>
          </a>
        </div>
      </div>
    </nav>

    <!-- Cart Display Section -->
    <main class="container mx-auto py-6">
      <h1 class="text-3xl font-bold mb-6" data-i18n="cart_title">Your Cart</h1>
      <table class="w-full bg-white rounded-md border border-gray-200">
        <thead>
          <tr class="bg-gray-100">
            <th class="p-3 text-left" data-i18n="cart_item">Item</th>
            <th class="p-3 text-left" data-i18n="cart_price">Price</th>
            <th class="p-3 text-left" data-i18n="cart_quantity">Quantity</th>
            <th class="p-3 text-left" data-i18n="cart_total">Total</th>
            <th class="p-3 text-left" data-i18n="cart_actions">Actions</th>
          </tr>
        </thead>
        <tbody id="cart-items">
          <!-- Cart items will be inserted here dynamically -->
        </tbody>
      </table>
      <p
        id="grand-total"
        class="text-xl font-bold mt-4"
        data-i18n="cart_grand_total"
      >
        Grand Total: ₹0.00
      </p>
    </main>

    <!-- Footer (same as main page) -->
    <footer class="bg-gray-800 text-white py-6">
      <div class="container mx-auto text-center">
        <div class="flex justify-center space-x-6 mb-4">
          <a href="#" class="hover:underline" data-i18n="about_us">About Us</a>
          <a href="#" class="hover:underline" data-i18n="contact">Contact</a>
          <a href="#" class="hover:underline" data-i18n="terms_conditions"
            >Terms & Conditions</a
          >
          <a href="#" class="hover:underline" data-i18n="privacy_policy"
            >Privacy Policy</a
          >
        </div>
        <p data-i18n="footer_copyright">
          © 2025 Chinnu's Dairy & Veggie Farm. All rights reserved.
        </p>
      </div>
    </footer>

    <!-- JavaScript to Manage Cart Display -->
    <script>
      // Function to render cart items
      function renderCart() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const cartItems = document.getElementById("cart-items");
        const lang = localStorage.getItem("language") || "en";

        const grandTotalElement = document.getElementById("grand-total");

        if (cart.length === 0) {
          cartItems.innerHTML =
            '<tr><td colspan="5" class="p-3 text-center">Your cart is empty.</td></tr>';
          grandTotalElement.textContent = "Grand Total: 0.00";
        } else {
          let html = "";
          let grandTotal = 0;
          cart.forEach((item) => {
            const total = item.price * item.quantity;
            grandTotal += total;
            html += `
                        <tr>
                            <td class="p-3">${item.name}</td>
                            <td class="p-3">₹${item.price.toFixed(2)}</td>
                            <td class="p-3">
                                <button class="decrease-quantity bg-gray-200 px-2 py-1 rounded hover:bg-gray-300" data-id="${
                                  item.id
                                }">-</button>
                                ${item.quantity}
                                <button class="increase-quantity bg-gray-200 px-2 py-1 rounded hover:bg-gray-300" data-id="${
                                  item.id
                                }">+</button>
                            </td>
                            <td class="p-3">₹${total.toFixed(2)}</td>
                            <td class="p-3">
                                <button class="remove-item bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600" data-id="${
                                  item.id
                                }">Remove</button>
                            </td>
                        </tr>
                    `;
          });
          cartItems.innerHTML = html;
          grandTotalElement.textContent = `Grand Total: ₹${grandTotal.toFixed(
            2
          )}`;
        }
        dataI18n(cartItems, lang);
      }

      // Function to update cart count in the navigation bar
      function updateCartCount() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const cartCount = cart.reduce(
          (total, item) => total + item.quantity,
          0
        );
        document.getElementById("cart-count").textContent = cartCount;
      }

      // Event listener for quantity adjustments and item removal
      document.addEventListener("click", (e) => {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const lang = localStorage.getItem("language") || "en";

        if (e.target.classList.contains("increase-quantity")) {
          const id = e.target.getAttribute("data-id");
          const item = cart.find((item) => item.id === id);
          if (item) {
            item.quantity += 1;
          }
        } else if (e.target.classList.contains("decrease-quantity")) {
          const id = e.target.getAttribute("data-id");
          const item = cart.find((item) => item.id === id);
          if (item && item.quantity > 1) {
            item.quantity -= 1;
          } else if (item && item.quantity === 1) {
            cart = cart.filter((item) => item.id !== id);
          }
        } else if (e.target.classList.contains("remove-item")) {
          const id = e.target.getAttribute("data-id");
          cart = cart.filter((item) => item.id !== id);
        }

        // Update localStorage and refresh display
        localStorage.setItem("cart", JSON.stringify(cart));

        renderCart();
        updateCartCount();
      });

      // Initialize cart display on page load
      document.addEventListener("DOMContentLoaded", () => {
        renderCart();
        updateCartCount();
      });
      document.getElementById("nav-toggle").onclick = function () {
        const menu = document.getElementById("mobile-menu");
        menu.classList.toggle("open");
      };
      document.addEventListener("click", function (e) {
        const menu = document.getElementById("mobile-menu");
        const toggle = document.getElementById("nav-toggle");
        if (
          menu.classList.contains("open") &&
          !menu.contains(e.target) &&
          !toggle.contains(e.target)
        ) {
          menu.classList.remove("open");
        }
      });
      // Mobile Account link (show login modal)
      document
        .getElementById("account-link-mobile")
        ?.addEventListener("click", function (e) {
          e.preventDefault();
          showLoginModal();
          // Optionally close the mobile menu after click
          document.getElementById("mobile-menu").classList.remove("open");
        });

      // Mobile Help Desk link (open chatbot)
      document
        .getElementById("help-desk-link-mobile")
        ?.addEventListener("click", function (e) {
          e.preventDefault();
          openChatbot();
          // Optionally close the mobile menu after click
          document.getElementById("mobile-menu").classList.remove("open");
        });

      document
        .getElementById("account-link")
        ?.addEventListener("click", showLoginModal);
    </script>
    <script src="script.js"></script>
  </body>
</html>
